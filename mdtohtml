#!/bin/bash
FILES="./data/markdown/*"
HFILES="./data/html/*"
HTML="./data/html/"
JSFILE="./js/markdown_content.js"

# transform markdown files to html
for f in $FILES
do
  filename=$(basename -- "$f")
  filename="${filename%.*}" 
  filename="$HTML${filename}.html"
  markdown $f > $filename 
done

# init the js file
rm $JSFILE
touch $JSFILE
echo -n "/* THIS FILE IS GENERATED FROM THE SCRIPT MDTOHTML." >> $JSFILE
echo -n "DO NOT EDIT." >> $JSFILE
echo -n "EDIT MD FILES IN DATA THEN COMPUTE THE SCRIPT AGAIN */" >> $JSFILE

# convert html files into js string variables 
for f in $HFILES
do
  filename=$(basename -- "$f")
  filename="${filename%.*}" 
  echo -n "var " >> $JSFILE
  echo -n $filename >> $JSFILE
  echo -n " = \"" >> $JSFILE

  cat $f | tr -d '\n' >> $JSFILE
  echo " \";" >> $JSFILE
done